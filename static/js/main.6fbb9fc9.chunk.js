(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),l=a.n(o),c=(a(95),a(16)),i=a(17),s=a(19),h=a(18),u=a(20),p=a(21);var d={root:{padding:"2px 4px",display:"flex",alignItems:"center",flexBasis:"30%"},input:{marginLeft:8,flex:1,order:1},iconButton:{padding:10,order:1},divider:{width:1,height:28,margin:4},searchContainer:{display:"flex",padding:10,backgroundColor:"gray",alignItems:"center",justifyContent:"center"},appContainer:{textAlign:"center"},appHeader:{backgroundColor:"#282c34",minHeight:45,fontDize:"calc(10px + 2vmin)",color:"white",position:"fixed",width:"100%",zIndex:3},error:{position:"relative",top:125,color:"red",fontSize:40}},g=a(85),m=a.n(g),f=a(87),S=a.n(f),y=a(39),v=a.n(y),b=a(28),w=a.n(b),O=a(86),E=a.n(O),j=a(81),k=a.n(j),H=a(80),x=a.n(H),C=a(79),I=a.n(C),P=a(83),N=a.n(P),T=a(82),M=a.n(T),G=a(78),A=a.n(G),J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleToggle=function(){var e=a.state.open;a.setState({open:!e})},a.handleClose=function(e){a.anchorEl.contains(e.target)||a.setState({open:!1})},a.showSearchHistory=function(){var e=a.props.showSearchHistory;a.setState({open:!1},e())},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.open;return r.a.createElement("div",{className:t.root},r.a.createElement("div",null,r.a.createElement(w.a,{buttonRef:function(t){e.anchorEl=t},className:t.iconButton,"aria-label":"Menu",onClick:this.handleToggle},r.a.createElement(A.a,null)),r.a.createElement(I.a,{open:a,anchorEl:this.anchorEl,transition:!0,disablePortal:!0},function(t){var a=t.TransitionProps,n=t.placement;return r.a.createElement(x.a,Object.assign({},a,{id:"menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(v.a,null,r.a.createElement(k.a,{onClickAway:e.handleClose},r.a.createElement(M.a,null,r.a.createElement(N.a,{onClick:e.showSearchHistory},"History")))))})))}}]),t}(r.a.Component),L=Object(p.withStyles)(d)(J),D=a(84),U=a.n(D),B=400,F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).handleSearch=U()(function(e){(0,a.props.handleSearch)(e)},B),a.handleInputChange=function(e){var t=a.props.autoSearch,n=e.target.value.toLowerCase();a.setState({searchValue:n}),t&&a.handleSearch(n)},a.handleAutoSearchToggle=function(e){(0,a.props.handleAutoSearchToggle)(e.target.checked)},a.handleManualSearch=function(e){var t=a.state.searchValue,n=a.props.handleSearch;e.key&&"Enter"!==e.key||n(t)},a.state={searchValue:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.inputPlaceHolder,n=e.autoSearch,o=e.showSearchHistory;return r.a.createElement("div",{className:t.searchContainer},r.a.createElement(v.a,{className:t.root,elevation:1},r.a.createElement(L,{showSearchHistory:o}),r.a.createElement(m.a,{onChange:this.handleInputChange,onKeyDown:this.handleManualSearch,className:t.input,placeholder:a}),!n&&r.a.createElement(w.a,{className:t.iconButton,"aria-label":"Search",onClick:this.handleManualSearch},r.a.createElement(E.a,null))),r.a.createElement("div",null,r.a.createElement(S.a,{checked:n,onChange:this.handleAutoSearchToggle,color:"primary"}),r.a.createElement("span",null,"Auto Search?")))}}]),t}(n.Component),W=Object(p.withStyles)(d)(F),_=a(88),z=(a(210),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).closeGallery=function(){var e=a.props.closeGallery;a.setState({photoIndex:null}),e()},a.state={photoIndex:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.images,n=t.isGalleryOpen,o=t.galleryPhotoIndex,l=this.state.photoIndex;return l=l||o,r.a.createElement("div",null,n&&r.a.createElement(_.a,{imageTitle:a[l].title,mainSrc:a[l].fullImageUrl,nextSrc:a[(l+1)%a.length].fullImageUrl,prevSrc:a[(l+a.length-1)%a.length].fullImageUrl,onCloseRequest:this.closeGallery,onMovePrevRequest:function(){return e.setState({photoIndex:(l+a.length-1)%a.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(l+1)%a.length})}}))}}]),t}(n.Component)),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).handleScroll=function(e){var t=a.props.loadMore;e.srcElement.body.scrollHeight-window.pageYOffset<window.innerHeight+250&&t()},a.closeGallery=function(){a.setState({isGalleryOpen:!1})},a.openGallery=function(e,t){a.setState({isGalleryOpen:!0,galleryPhotoIndex:t})},a.state={isGalleryOpen:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.photos,o=t.isLoading,l=t.error,c=this.state,i=c.isGalleryOpen,s=c.galleryPhotoIndex;return r.a.createElement("div",{className:a.galleryContainer},n.map(function(t,n){return r.a.createElement("img",{className:a.photo,key:t.id,onClick:function(){e.openGallery(t,n)},alt:t.title,src:t.thumbnailUrl})}),!o&&!l&&0===n.length&&r.a.createElement("div",null,"No results"),r.a.createElement(z,{images:n,isGalleryOpen:i,galleryPhotoIndex:s,closeGallery:this.closeGallery}))}}]),t}(n.Component),q=Object(p.withStyles)({galleryContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center",position:"relative",top:100},photo:{maxWidth:"30%",maxHeight:150,minWidth:100,flexFlow:"row nowrap",alignItems:"center",margin:5,transition:"all 1s",cursor:"pointer",zIndex:1,"&:hover":{transform:"scale(1.2)",zIndex:2}}})(R),V=(a(211),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).toggleLoaderSearchTermPage=function(e,t,n){a.setState({loading:e,searchTerm:t,currentPage:n})},a.updateSearchHistory=function(e){var t=a.state.searchHistory;t.includes(e)||(t.push(e),localStorage.imageSearchHistory=JSON.stringify(t),a.setState({searchHistory:t}))},a.handleSearch=function(e){""!==e&&(a.getData(e),a.updateSearchHistory(e))},a.loadMore=function(){var e=a.state,t=e.loading,n=e.error,r=e.currentPage,o=e.searchTerm,l=e.noMorePhotosToFetch;t||n||l||a.getData(o,r+1)},a.handleAutoSearchToggle=function(e){a.setState({autoSearch:e}),localStorage.autoSearch=JSON.stringify(e)},a.showSearchHistory=function(){console.log("showSearchHistory")},a.state={searchInputPlaceHolder:"Search Flicker...",photos:[],loading:!0,error:!1,currentPage:1,searchTerm:"animals",noMorePhotosToFetch:!1,searchHistory:[],autoSearch:!0},a.photosPerPage=100,a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.searchTerm,a=e.currentPage;localStorage.imageSearchHistory=localStorage.imageSearchHistory||JSON.stringify([]),localStorage.autoSearch=localStorage.autoSearch||JSON.stringify(!0),this.setState({searchHistory:JSON.parse(localStorage.imageSearchHistory),autoSearch:JSON.parse(localStorage.autoSearch)},this.getData(t,a))}},{key:"getData",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.toggleLoaderSearchTermPage(!0,e,a),function(e,t){return fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&safe_search=1&format=json&nojsoncallback=1&api_key=bac9f1ccfd854f27894fd47c4f01b1e8&content_type=1&is_getty=1&text="+e+"&page="+t).then(function(e){return e.text()}).then(function(e){return JSON.parse(e)})}(e,a).then(function(e){if(e&&e.photos&&e.photos.photo){var n=function(e){return e.map(function(e){var t=e.farm,a=e.server,n=e.id,r=e.secret,o="https://farm"+t+".staticflickr.com/"+a+"/"+n+"_"+r;return{thumbnailUrl:o+"_m.jpg",fullImageUrl:o+".jpg",title:e.title,id:""+r+n}})}(e.photos.photo),r=!1;n.length<t.photosPerPage&&(r=!0),t.setState({photos:a>1?t.state.photos.concat(n):n,loading:!1,error:!1,noMorePhotosToFetch:r})}}).catch(function(e){t.setState({error:!0,loading:!1})})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.appHeader,n=this.state,o=n.searchInputPlaceHolder,l=n.photos,c=n.loading,i=n.error,s=n.autoSearch;return r.a.createElement("div",{className:t.appContainer},r.a.createElement("header",{className:t.appHeader},a,r.a.createElement(W,{handleSearch:this.handleSearch,inputPlaceHolder:o,showSearchHistory:this.showSearchHistory,autoSearch:s,handleAutoSearchToggle:this.handleAutoSearchToggle})),r.a.createElement(q,{photos:l,isLoading:c,error:i,loadMore:this.loadMore}),c&&r.a.createElement("div",{className:"loading"},"Loading\u2026"),i&&r.a.createElement("div",{className:t.error},"Error fetching images"))}}]),t}(n.Component)),K=Object(p.withStyles)(d)(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(K,{appHeader:"Flicker Image Search"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,a){e.exports=a(212)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.6fbb9fc9.chunk.js.map