(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(20),c=a.n(o),l=(a(95),a(15)),i=a(16),s=a(18),h=a(17),u=a(19),p=a(21);var g={appContainer:{textAlign:"center"},appHeader:{backgroundColor:"#282c34",minHeight:45,fontDize:"calc(10px + 2vmin)",color:"white",position:"fixed",width:"100%",zIndex:3},searchContainerPaper:{padding:"2px 4px",display:"flex",alignItems:"center",flexBasis:"30%"},menuPaper:{padding:"2px 4px",display:"flex",flexBasis:"10%"},input:{marginLeft:8,flex:1,order:1},iconButton:{padding:10,order:1},divider:{width:1,height:28,margin:4},searchContainer:{display:"flex",padding:10,backgroundColor:"gray",alignItems:"center",justifyContent:"center","@media (max-width:780px)":{flexDirection:"column"}},searchHistoryContainer:{position:"relative",top:100},searchHistoryItem:{cursor:"pointer","&:hover":{backgroundColor:"lightgray"}},error:{position:"relative",top:125,color:"red",fontSize:40}},d=a(85),m=a.n(d),S=a(87),y=a.n(S),f=a(39),v=a.n(f),H=a(28),b=a.n(H),O=a(86),w=a.n(O),E=a(82),j=a.n(E),x=a(81),C=a.n(x),k=a(80),I=a.n(k),P=a(49),N=a.n(P),T=a(83),G=a.n(T),M=a(79),A=a.n(M),J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={open:!1},a.handleToggle=function(){var e=a.state.open;a.setState({open:!e})},a.handleClose=function(e){a.anchorEl.contains(e.target)||a.setState({open:!1})},a.toggleSearchHistory=function(){var e=a.props.toggleSearchHistory;a.setState({open:!1},e())},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.showSearchHistory,o=t.clearSearchHistory,c=this.state.open;return n.a.createElement("div",{className:a.menuPaper},n.a.createElement("div",null,n.a.createElement(b.a,{buttonRef:function(t){e.anchorEl=t},className:a.iconButton,"aria-label":"Menu",onClick:this.handleToggle},n.a.createElement(A.a,null)),n.a.createElement(I.a,{open:c,anchorEl:this.anchorEl,transition:!0,disablePortal:!0},function(t){var a=t.TransitionProps,c=t.placement;return n.a.createElement(C.a,Object.assign({},a,{id:"menu-list-grow",style:{transformOrigin:"bottom"===c?"center top":"center bottom"}}),n.a.createElement(v.a,null,n.a.createElement(j.a,{onClickAway:e.handleClose},n.a.createElement(G.a,null,n.a.createElement(N.a,{onClick:e.toggleSearchHistory},r?"Show Gallery":"Search History"),r&&n.a.createElement(N.a,{onClick:o},"Clear History")))))})))}}]),t}(r.Component),D=Object(p.withStyles)(g)(J),F=a(84),L=a.n(F),B=400,U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).handleSearch=L()(function(e){(0,a.props.handleSearch)(e)},B),a.handleInputChange=function(e){var t=a.props.autoSearch,r=e.target.value.toLowerCase();a.setState({searchValue:r}),t&&a.handleSearch(r)},a.handleAutoSearchToggle=function(e){(0,a.props.handleAutoSearchToggle)(e.target.checked)},a.handleManualSearch=function(e){var t=a.state.searchValue,r=a.props.handleSearch;e.key&&"Enter"!==e.key||r(t)},a.state={searchValue:a.props.searchTerm},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.inputPlaceHolder,r=e.autoSearch,o=e.toggleSearchHistory,c=e.showSearchHistory,l=e.clearSearchHistory;return n.a.createElement("div",{className:t.searchContainer},n.a.createElement(v.a,{className:t.searchContainerPaper,elevation:1},n.a.createElement(D,{toggleSearchHistory:o,showSearchHistory:c,clearSearchHistory:l}),n.a.createElement(m.a,{onChange:this.handleInputChange,onKeyDown:this.handleManualSearch,className:t.input,placeholder:a,id:"searchInput"}),!r&&n.a.createElement(b.a,{className:t.iconButton,"aria-label":"Search",onClick:this.handleManualSearch},n.a.createElement(w.a,null))),n.a.createElement("div",null,n.a.createElement(y.a,{checked:r,onChange:this.handleAutoSearchToggle,color:"primary"}),n.a.createElement("span",null,"Auto Search?")))}}]),t}(r.Component),R=Object(p.withStyles)(g)(U),W=a(88),_=(a(210),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).closeGallery=function(){var e=a.props.closeGallery;a.setState({photoIndex:null}),e()},a.state={photoIndex:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.images,r=t.isGalleryOpen,o=t.galleryPhotoIndex,c=this.state.photoIndex;return c=c||o,r?n.a.createElement(W.a,{imageTitle:a[c].title,mainSrc:a[c].fullImageUrl,nextSrc:a[(c+1)%a.length].fullImageUrl,prevSrc:a[(c+a.length-1)%a.length].fullImageUrl,onCloseRequest:this.closeGallery,onMovePrevRequest:function(){return e.setState({photoIndex:(c+a.length-1)%a.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(c+1)%a.length})}}):null}}]),t}(r.Component)),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).handleScroll=function(e){var t=a.props.loadMore;e.srcElement.body.scrollHeight-window.pageYOffset<window.innerHeight+250&&t()},a.closeGallery=function(){a.setState({isGalleryOpen:!1})},a.openGallery=function(e,t){a.setState({isGalleryOpen:!0,galleryPhotoIndex:t})},a.state={isGalleryOpen:!1},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.photos,o=t.isLoading,c=t.error,l=this.state,i=l.isGalleryOpen,s=l.galleryPhotoIndex,h=!o&&!c&&0===r.length;return n.a.createElement("div",{className:"".concat(a.galleryContainer," ").concat(h?a.noSearchResults:"")},r.map(function(t,r){return n.a.createElement("img",{className:a.photo,key:t.id,onClick:function(){e.openGallery(t,r)},alt:t.title,src:t.thumbnailUrl})}),h&&n.a.createElement("div",null,"No results"),n.a.createElement(_,{images:r,isGalleryOpen:i,galleryPhotoIndex:s,closeGallery:this.closeGallery}))}}]),t}(r.Component),q=Object(p.withStyles)({galleryContainer:{display:"flex",flexWrap:"wrap",position:"relative",justifyContent:"space-between",alignItems:"center",top:100,"@media (max-width:780px)":{top:140}},photo:{maxWidth:"30%",maxHeight:150,minWidth:100,flexFlow:"row nowrap",alignItems:"center",margin:5,transition:"all 1s",cursor:"pointer",zIndex:1,objectFit:"cover","&:hover":{transform:"scale(1.2)",zIndex:2}},noSearchResults:{justifyContent:"center"}})(z),V=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.searchHistory,r=e.handleSearch;return n.a.createElement("div",{className:t.searchHistoryContainer},a.map(function(e,o){return n.a.createElement("span",{key:"search-history-item-"+o},n.a.createElement("span",{className:t.searchHistoryItem,onClick:function(){r(e)}},e),o<a.length-1?",":"")}),0===a.length&&n.a.createElement("div",null,"No Search History"))}}]),t}(r.Component),K=Object(p.withStyles)(g)(V),Y=(a(211),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).toggleLoaderSearchTermPage=function(e,t,r){a.setState({loading:e,searchTerm:t,currentPage:r})},a.clearSearchHistory=function(){localStorage.imageSearchHistory=JSON.parse("[]"),a.setState({searchHistory:[]})},a.updateSearchHistory=function(e){var t=a.state.searchHistory;t.includes(e.trim())||(t.push(e),localStorage.imageSearchHistory=JSON.stringify(t),a.setState({searchHistory:t}))},a.handleSearch=function(e){a.state.showSearchHistory&&a.toggleSearchHistory(),""!==e&&(a.getData(e),a.updateSearchHistory(e))},a.loadMore=function(){var e=a.state,t=e.loading,r=e.error,n=e.currentPage,o=e.searchTerm,c=e.noMorePhotosToFetch;t||r||c||a.getData(o,n+1)},a.handleAutoSearchToggle=function(e){a.setState({autoSearch:e}),localStorage.autoSearch=JSON.stringify(e)},a.toggleSearchHistory=function(){var e=a.state.showSearchHistory;a.setState({showSearchHistory:!e})},a.handleSearchFromHistory=function(e){a.handleSearch(e),document.getElementById("searchInput").value=e},a.state={searchInputPlaceHolder:"Search Flicker...",photos:[],loading:!0,error:!1,currentPage:1,searchTerm:"animals",noMorePhotosToFetch:!1,searchHistory:[],autoSearch:!0,showSearchHistory:!1},a.photosPerPage=100,a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.searchTerm,a=e.currentPage;localStorage.imageSearchHistory=localStorage.imageSearchHistory||JSON.stringify([]),localStorage.autoSearch=localStorage.autoSearch||JSON.stringify(!0),this.setState({searchHistory:JSON.parse(localStorage.imageSearchHistory),autoSearch:JSON.parse(localStorage.autoSearch)},this.getData(t,a))}},{key:"getData",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.toggleLoaderSearchTermPage(!0,e,a),function(e,t){return fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&safe_search=1&format=json&nojsoncallback=1&api_key=bac9f1ccfd854f27894fd47c4f01b1e8&content_type=1&is_getty=1&text="+e+"&page="+t).then(function(e){return e.text()}).then(function(e){return JSON.parse(e)})}(e,a).then(function(e){if(e&&e.photos&&e.photos.photo){var r=function(e){return e.map(function(e){var t=e.farm,a=e.server,r=e.id,n=e.secret,o="https://farm"+t+".staticflickr.com/"+a+"/"+r+"_"+n;return{thumbnailUrl:o+"_m.jpg",fullImageUrl:o+".jpg",title:e.title,id:""+n+r}})}(e.photos.photo),n=!1;r.length<t.photosPerPage&&(n=!0),t.setState({photos:a>1?t.state.photos.concat(r):r,loading:!1,error:!1,noMorePhotosToFetch:n})}}).catch(function(e){t.setState({error:!0,loading:!1})})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.appHeader,r=this.state,o=r.searchInputPlaceHolder,c=r.photos,l=r.loading,i=r.error,s=r.autoSearch,h=r.showSearchHistory,u=r.searchHistory,p=r.searchTerm;return n.a.createElement("div",{className:t.appContainer},n.a.createElement("header",{className:t.appHeader},a,n.a.createElement(R,{searchTerm:p,handleSearch:this.handleSearch,inputPlaceHolder:o,toggleSearchHistory:this.toggleSearchHistory,showSearchHistory:h,clearSearchHistory:this.clearSearchHistory,autoSearch:s,handleAutoSearchToggle:this.handleAutoSearchToggle})),!h&&n.a.createElement(q,{photos:c,isLoading:l,error:i,loadMore:this.loadMore}),h&&n.a.createElement(K,{searchHistory:u,handleSearch:this.handleSearchFromHistory}),l&&n.a.createElement("div",{className:"loading"},"Loading\u2026"),i&&n.a.createElement("div",{className:t.error},"Error fetching images"))}}]),t}(r.Component)),$=Object(p.withStyles)(g)(Y);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement($,{appHeader:"Flicker Image Search"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,a){e.exports=a(212)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.178f1c50.chunk.js.map