(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{151:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(37),l=a.n(o),i=(a(68),a(8)),c=a(9),s=a(11),h=a(10),u=a(12),p=a(21);var d={root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400,margin:"auto"},input:{marginLeft:8,flex:1},iconButton:{padding:10},divider:{width:1,height:28,margin:4},searchContainer:{padding:10,backgroundColor:"gray"},appContainer:{textAlign:"center"},appHeader:{backgroundColor:"#282c34",minHeight:45,fontDize:"calc(10px + 2vmin)",color:"white",position:"fixed",width:"100%",zIndex:3},error:{position:"relative",top:125,color:"red",fontSize:40}},g=a(60),m=a.n(g),f=a(58),v=a.n(f),y=a(57),S=a.n(y),O=400,b=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSearch=S()(function(e){(0,a.props.handleSearch)(e)},O),a.handleInputChange=function(e){var t=e.target.value.toLowerCase();a.handleSearch(t)},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.inputPlaceHolder;return r.a.createElement("div",{className:t.searchContainer},r.a.createElement(v.a,{className:t.root,elevation:1},r.a.createElement(m.a,{onChange:this.handleInputChange,className:t.input,placeholder:a})))}}]),t}(n.Component),w=Object(p.withStyles)(d)(b),x=a(61),j=(a(150),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).closeGallery=function(){var e=a.props.closeGallery;a.setState({photoIndex:null}),e()},a.state={photoIndex:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.images,n=t.isGalleryOpen,o=t.galleryPhotoIndex,l=this.state.photoIndex;return l=l||o,r.a.createElement("div",null,n&&r.a.createElement(x.a,{imageTitle:a[l].title,mainSrc:a[l].fullImageUrl,nextSrc:a[(l+1)%a.length].fullImageUrl,prevSrc:a[(l+a.length-1)%a.length].fullImageUrl,onCloseRequest:this.closeGallery,onMovePrevRequest:function(){return e.setState({photoIndex:(l+a.length-1)%a.length})},onMoveNextRequest:function(){return e.setState({photoIndex:(l+1)%a.length})}}))}}]),t}(n.Component)),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).handleScroll=function(e){var t=a.props.loadMore;e.srcElement.body.scrollHeight-window.pageYOffset<window.innerHeight+250&&t()},a.closeGallery=function(){a.setState({isGalleryOpen:!1})},a.openGallery=function(e,t){console.log(e,t),a.setState({isGalleryOpen:!0,galleryPhotoIndex:t})},a.state={isGalleryOpen:!1},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.photos,o=t.isLoading,l=t.error,i=this.state,c=i.isGalleryOpen,s=i.galleryPhotoIndex;return r.a.createElement("div",{className:a.galleryContainer},n.map(function(t,n){return r.a.createElement("img",{className:a.photo,key:t.id,onClick:function(){e.openGallery(t,n)},alt:t.title,src:t.thumbnailUrl})}),!o&&!l&&0===n.length&&r.a.createElement("div",null,"No results"),r.a.createElement(j,{images:n,isGalleryOpen:c,galleryPhotoIndex:s,closeGallery:this.closeGallery}))}}]),t}(n.Component),k=Object(p.withStyles)({galleryContainer:{display:"flex",flexWrap:"wrap",justifyContent:"center",position:"relative",top:80},photo:{maxWidth:"30%",maxHeight:150,minWidth:100,flexFlow:"row nowrap",alignItems:"center",margin:5,transition:"all 1s",cursor:"pointer",zIndex:1,"&:hover":{transform:"scale(1.2)",zIndex:2}}})(I),H=(a(151),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(h.a)(t).call(this,e))).toggleLoaderSearchTermPage=function(e,t,n){a.setState({loading:e,searchTerm:t,currentPage:n})},a.updateSearchHistory=function(e){var t=a.state.searchHistory;t.includes(e)||(t.push(e),localStorage.imageSearchHistory=JSON.stringify(t),a.setState({searchHistory:t}))},a.handleSearch=function(e){""!==e&&(a.getData(e),a.updateSearchHistory(e))},a.loadMore=function(){var e=a.state,t=e.loading,n=e.error,r=e.currentPage,o=e.searchTerm,l=e.noMorePhotosToFetch;t||n||l||a.getData(o,r+1)},a.state={searchInputPlaceHolder:"Search Flicker...",photos:[],loading:!0,error:!1,currentPage:1,searchTerm:"animals",noMorePhotosToFetch:!1,searchHistory:[]},a.photosPerPage=100,a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,t=e.searchTerm,a=e.currentPage;localStorage.imageSearchHistory=localStorage.imageSearchHistory||JSON.stringify([]),this.setState({searchHistory:JSON.parse(localStorage.imageSearchHistory)},this.getData(t,a))}},{key:"getData",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.toggleLoaderSearchTermPage(!0,e,a),function(e,t){return fetch("https://api.flickr.com/services/rest/?method=flickr.photos.search&safe_search=1&format=json&nojsoncallback=1&api_key=bac9f1ccfd854f27894fd47c4f01b1e8&content_type=1&is_getty=1&text="+e+"&page="+t).then(function(e){return e.text()}).then(function(e){return JSON.parse(e)})}(e,a).then(function(e){if(e&&e.photos&&e.photos.photo){var n=function(e){return e.map(function(e){var t=e.farm,a=e.server,n=e.id,r=e.secret,o="https://farm"+t+".staticflickr.com/"+a+"/"+n+"_"+r;return{thumbnailUrl:o+"_m.jpg",fullImageUrl:o+".jpg",title:e.title,id:""+r+n}})}(e.photos.photo),r=!1;n.length<t.photosPerPage&&(r=!0),t.setState({photos:a>1?t.state.photos.concat(n):n,loading:!1,error:!1,noMorePhotosToFetch:r})}}).catch(function(e){t.setState({error:!0,loading:!1})})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.appHeader,n=this.state,o=n.searchInputPlaceHolder,l=n.photos,i=n.loading,c=n.error;return r.a.createElement("div",{className:t.appContainer},r.a.createElement("header",{className:t.appHeader},a,r.a.createElement(w,{handleSearch:this.handleSearch,inputPlaceHolder:o})),r.a.createElement(k,{photos:l,isLoading:i,error:c,loadMore:this.loadMore}),i&&r.a.createElement("div",{className:"loading"},"Loading\u2026"),c&&r.a.createElement("div",{className:t.error},"Error fetching images"))}}]),t}(n.Component)),P=Object(p.withStyles)(d)(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(P,{appHeader:"Flicker Image Search"}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},63:function(e,t,a){e.exports=a(152)},68:function(e,t,a){}},[[63,1,2]]]);
//# sourceMappingURL=main.9e7e0581.chunk.js.map